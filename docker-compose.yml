version: '3.8'

secrets:
  account_address:
    file: ./configuration/energi3_account_address
  account_password:
    file: ./configuration/energi3_account_password

services:
  core:
    build:
      args:
        ENERGI_VERSION: ${ENERGI_VERSION:?ENERGI_VERSION must be set in .env!"}
        STAKER_HOME:
          ${STAKER_HOME:?STAKER_HOME must be set in .env (it should be copied from .env.template.env)!}
      context: .
    image: energi-core:${ENERGI_VERSION}-1.0
    ports:
      - 39797:39797/tcp
      - 39797:39797/udp
    restart: unless-stopped
    secrets:
      - account_address
      - account_password
    volumes:
      - core-data:${STAKER_HOME}/.energicore3

volumes:
  core-data:
